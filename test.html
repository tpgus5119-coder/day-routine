<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Day Routine - Canvas Test</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            background: #1a1a2e;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 20px;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .info {
            margin: 10px 0;
            font-size: 14px;
        }

        .canvas-container {
            width: 260px;
            height: 260px;
            background: #16162a;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        canvas {
            display: block;
        }

        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
        }

        .error {
            color: #ff6b6b;
        }

        .success {
            color: #1dd1a1;
        }
    </style>
</head>

<body>
    <h1>ğŸ§ª Canvas í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>

    <div class="info" id="info1">ë¡œë”© ì¤‘...</div>
    <div class="info" id="info2"></div>
    <div class="info" id="info3"></div>
    <div class="info" id="info4"></div>

    <div class="canvas-container">
        <canvas id="testCanvas" width="260" height="260"></canvas>
    </div>

    <button onclick="runTest()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
    <button onclick="drawCircle()">ì› ê·¸ë¦¬ê¸°</button>

    <script>
        const info1 = document.getElementById('info1');
        const info2 = document.getElementById('info2');
        const info3 = document.getElementById('info3');
        const info4 = document.getElementById('info4');

        function log(el, msg, isSuccess) {
            el.textContent = msg;
            el.className = 'info ' + (isSuccess ? 'success' : 'error');
        }

        function runTest() {
            try {
                // Test 1: Canvas element exists
                const cv = document.getElementById('testCanvas');
                if (!cv) {
                    log(info1, 'âŒ ìº”ë²„ìŠ¤ ìš”ì†Œ ì—†ìŒ', false);
                    return;
                }
                log(info1, 'âœ… ìº”ë²„ìŠ¤ ìš”ì†Œ ë°œê²¬', true);

                // Test 2: Canvas dimensions
                log(info2, `ğŸ“ ìº”ë²„ìŠ¤ í¬ê¸°: ${cv.width} x ${cv.height}`, cv.width > 0);

                // Test 3: Get 2D context
                const ctx = cv.getContext('2d');
                if (!ctx) {
                    log(info3, 'âŒ 2D ì»¨í…ìŠ¤íŠ¸ íšë“ ì‹¤íŒ¨', false);
                    return;
                }
                log(info3, 'âœ… 2D ì»¨í…ìŠ¤íŠ¸ íšë“ ì„±ê³µ', true);

                // Test 4: Device pixel ratio
                const dpr = window.devicePixelRatio || 1;
                log(info4, `ğŸ“± DPR: ${dpr}, UA: ${navigator.userAgent.slice(0, 50)}...`, true);

            } catch (e) {
                log(info1, 'âŒ ì˜¤ë¥˜: ' + e.message, false);
            }
        }

        function drawCircle() {
            try {
                const cv = document.getElementById('testCanvas');
                const ctx = cv.getContext('2d');
                const W = cv.width, H = cv.height;
                const cx = W / 2, cy = H / 2, R = 100;

                // Clear
                ctx.clearRect(0, 0, W, H);

                // Draw background circle
                ctx.beginPath();
                ctx.arc(cx, cy, R, 0, Math.PI * 2);
                ctx.fillStyle = '#1e1e3a';
                ctx.fill();
                ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                ctx.lineWidth = 4;
                ctx.stroke();

                // Draw center dot
                ctx.beginPath();
                ctx.arc(cx, cy, 5, 0, Math.PI * 2);
                ctx.fillStyle = '#6366f1';
                ctx.fill();

                // Draw time markers
                for (let i = 0; i < 12; i++) {
                    const angle = (i / 12) * Math.PI * 2 - Math.PI / 2;
                    const x1 = cx + Math.cos(angle) * (R - 15);
                    const y1 = cy + Math.sin(angle) * (R - 15);
                    const x2 = cx + Math.cos(angle) * R;
                    const y2 = cy + Math.sin(angle) * R;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.strokeStyle = 'rgba(255,255,255,0.3)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                // Draw text
                ctx.font = '14px sans-serif';
                ctx.fillStyle = '#fff';
                ctx.textAlign = 'center';
                ctx.fillText('ì›ì´ ë³´ì´ë©´ ì„±ê³µ!', cx, cy + 50);

                log(info1, 'âœ… ì› ê·¸ë¦¬ê¸° ì„±ê³µ!', true);

            } catch (e) {
                log(info1, 'âŒ ê·¸ë¦¬ê¸° ì˜¤ë¥˜: ' + e.message, false);
            }
        }

        // Auto-run on load
        window.onload = function () {
            runTest();
            setTimeout(drawCircle, 100);
        };
    </script>
</body>

</html>